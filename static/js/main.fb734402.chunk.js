(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{194:function(e,t,a){e.exports=a(299)},296:function(e,t,a){},299:function(e,t,a){"use strict";a.r(t);a(195),a(221),a(223),a(224),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263);var n=a(0),r=a.n(n),o=a(111),c=a.n(o),s=a(17),i=a.n(s),l=a(112),u=a(113),p=a(38),d=a(125),h=a(124),m=a(77),b=a.n(m),f=a(18),E=(a(282),a(53)),v=a.n(E),g=a(54),S=a.n(g),k=a(48),w=a.n(k),A=a(120),y=a.n(A),B=a(55),T=a.n(B),j=a(47),O=a.n(j),W=a(119),N=a.n(W),K=a(46),M=a.n(K);Object(f.h)();var V=function(e){var t=e.id,a=e.count,n=(e.newAds,e.checkBonuseAd),o=(e.fetchedUser,e.snackbar);e.openError,e.openBase;return r.a.createElement(v.a,{id:t},r.a.createElement(S.a,null,"\u0420\u0435\u043a\u043b\u0430\u043c\u0430"),r.a.createElement(T.a,{mode:"plain"},r.a.createElement(f.e,{description:r.a.createElement("b",null,a)},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0441\u0435\u0433\u043e\u0434\u043d\u044f")),r.a.createElement(T.a,{header:r.a.createElement(N.a,{mode:"secondary"},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u043a\u043b\u0430\u043c\u044b")},i.a.supports("VKWebAppShowNativeAds")&&r.a.createElement(M.a,{before:r.a.createElement(O.a,{mode:"image",size:48,src:"https://i.ibb.co/QMNQ7BW/image.png"}),header:"\ud83c\udf81 \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",subheader:r.a.createElement("i",null,"\u0422\u0438\u043f \u0440\u0435\u043a\u043b\u0430\u043c\u044b: ",r.a.createElement("b",null,"reward")," (\u0432\u0438\u0434\u0435\u043e \u0441 \u043d\u0430\u0433\u0440\u0430\u0434\u043e\u0439 \u0437\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440)"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{mode:"commerce",onClick:function(){return n("reward")}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"))}),i.a.supports("VKWebAppShowNativeAds")&&r.a.createElement(M.a,{before:r.a.createElement(O.a,{mode:"image",size:48,src:"https://i.ibb.co/QMNQ7BW/image.png"}),header:"\ud83c\udf81 \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",subheader:r.a.createElement("i",null,"\u0422\u0438\u043f \u0440\u0435\u043a\u043b\u0430\u043c\u044b: ",r.a.createElement("b",null,"preloader")," (\u0432\u0438\u0434\u0435\u043e\u043f\u0440\u0435\u043b\u043e\u0430\u0434\u0435\u0440)"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{mode:"commerce",onClick:function(){return n("preloader")}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"))}),i.a.supports("VKWebAppShowNativeAds")&&r.a.createElement(M.a,{before:r.a.createElement(O.a,{mode:"image",size:48,src:"https://i.ibb.co/QMNQ7BW/image.png"}),header:"\ud83c\udf81 \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",subheader:r.a.createElement("i",null,"\u0422\u0438\u043f \u0440\u0435\u043a\u043b\u0430\u043c\u044b: ",r.a.createElement("b",null,"interstitial")," (\u0440\u0435\u043a\u043b\u0430\u043c\u0430 \u043c\u0435\u0436\u0434\u0443 \u044d\u043a\u0440\u0430\u043d\u0430\u043c\u0438)"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{mode:"commerce",onClick:function(){return n("interstitial")}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"))}),!i.a.supports("VKWebAppShowNativeAds")&&r.a.createElement(M.a,{before:r.a.createElement(O.a,{mode:"image",size:48,src:"https://i.ibb.co/QMNQ7BW/image.png"}),header:"\ud83c\udf81 \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",subheader:"\u0412\u0430\u0448\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u0443.",actions:r.a.createElement(w.a,{onClick:function(){return i.a.send("VKWebAppSendToClient",{fragment:"setting"})}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d")})),r.a.createElement(T.a,null,r.a.createElement("center",null,r.a.createElement(y.a,{style:{paddingTop:20,paddingBottom:20}},"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043e \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u044f VK Bridge ",r.a.createElement("b",null,r.a.createElement(f.b,{href:"https://vk.com/dev/vkbridge/vkwebappshownativeads",target:"_blank"},"VKWebAppShowNativeAds"))))),o)},C=(a(121),a(122),a(308),a(296),a(123)),U=a.n(C),P=(a(297).parse(window.location.hash),{backgroundColor:"var(--accent)"}),Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setActiveTab=function(e){n.setState({activeTabTop:"".concat(e)})},n.setActiveTabBanner=function(e){n.setState({activeTabTopBanner:"".concat(e)})},n.modal=function(e){n.setState({activeModal:e.currentTarget.dataset.to})},n.auth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;1==e&&n.setState({popout:r.a.createElement(f.d,null)}),fetch("https://ads.apiuser.ru/api/auth/".concat(window.location.search.substring()),{method:"POST",body:JSON.stringify({user:"".concat(n.state.fetchedUser.id)}),headers:{"content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){n.setState({popout:null}),setTimeout((function(){}),1111),"error"==e.status?(n.setState({popout:null}),n.setState({activePanel:"errorconnect",errorDescription:e.message})):n.setState({popout:null,count:e.count})})).catch((function(e){n.internetError()}))},n.newAds=function(){fetch("https://ads.apiuser.ru/api/new/".concat(window.location.search.substring()),{method:"POST",body:JSON.stringify({user:"".concat(n.state.fetchedUser.id)}),headers:{"content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){setTimeout((function(){}),1111),"error"==e.status?(n.setState({popout:null}),n.setState({activePanel:"errorconnect",errorDescription:e.message})):(n.setState({popout:null,count:e.count}),n.openBase(e.message))})).catch((function(e){n.internetError()}))},n.state={activePanel:"home",count:"\u2022\u2022\u2022",popout:null,snackbar:null,fetching:!1},n.closeModal=n.closeModal.bind(Object(p.a)(n)),n.openBase=n.openBase.bind(Object(p.a)(n)),n.openError=n.openError.bind(Object(p.a)(n)),n.newAds=n.newAds.bind(Object(p.a)(n)),n.checkBonuseAd=n.checkBonuseAd.bind(Object(p.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({popout:r.a.createElement(f.d,null)}),i.a.subscribe((function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data}),e.auth()}})),i.a.send("VKWebAppGetUserInfo",{})}},{key:"closeModal",value:function(){this.setState({activeModal:null})}},{key:"closePopout",value:function(){this.setState({popout:null})}},{key:"openBase",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success";this.setState({snackbar:null}),this.setState({snackbar:r.a.createElement(f.f,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(f.a,{size:24,style:P},r.a.createElement(b.a,{fill:"#fff",width:14,height:14}))},t)})}},{key:"openError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";this.setState({snackbar:null}),this.setState({snackbar:r.a.createElement(f.f,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(f.a,{size:24,style:P},r.a.createElement(U.a,{fill:"#fff",width:14,height:14}))},t)})}},{key:"checkBonuseAd",value:function(e){var t=this;this.setState({popout:r.a.createElement(f.d,null)}),this.setState({activeModal:null}),i.a.supports("VKWebAppShowNativeAds")?i.a.send("VKWebAppShowNativeAds",{ad_format:e}).then((function(e){e.result?(t.setState({popout:r.a.createElement(f.d,null)}),fetch("https://ads.apiuser.ru/api/new/".concat(window.location.search.substring()),{method:"POST",body:JSON.stringify({user:"".concat(t.state.fetchedUser.id)}),headers:{"content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){switch(t.setState({activeModal:null}),t.setState({popout:null}),e.status){case"success":t.openBase(e.message),t.setState({count:e.count});break;case"error":t.openError(e.message)}})).catch((function(e){t.internetError()}))):(t.openError("\u0412\u044b \u043d\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043b\u0438 \u0440\u0435\u043a\u043b\u0430\u043c\u0443!"),t.auth(0))})).catch((function(e){var a="#".concat(e.error_data.error_code," \u2014 ").concat(e.error_data.error_reason);t.openError("\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437. \u041e\u0448\u0438\u0431\u043a\u0430 VK: ".concat(a)),t.auth(0)})):(this.openError("\u0412\u0430\u0448\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u0443. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435!"),this.auth(0))}},{key:"internetError",value:function(){var e=this;this.state.snackbar||this.setState({snackbar:r.a.createElement(f.f,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(f.a,{size:24},r.a.createElement(b.a,{width:14,height:14}))},"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e :(")})}},{key:"render",value:function(){f.c,this.state.activeModal,this.closeModal;return r.a.createElement(f.g,{popout:this.state.popout,activePanel:this.state.activePanel},r.a.createElement(V,{id:"home",count:this.state.count,snackbar:this.state.snackbar,newAds:this.newAds,checkBonuseAd:this.checkBonuseAd,openBase:this.openBase,openError:this.openError}))}}]),a}(r.a.Component);i.a.send("VKWebAppInit"),i.a.subscribe((function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=e.detail.data.scheme?e.detail.data.scheme:"space_gray",document.body.attributes.setNamedItem(t)}})),c.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.fb734402.chunk.js.map